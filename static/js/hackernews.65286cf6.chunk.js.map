{"version":3,"sources":["webpack:///./src/api/httpClient.js","webpack:///./src/api/index.js","webpack:///./src/api/hnApi.js","webpack:///./src/components/tableHeader/TableHeader.js","webpack:///./src/components/hackerNews/HackerNews.js","webpack:///./src/utils/assetUtils.js"],"names":["httpClient","baseURL","get","path","options","fetch","then","res","ok","Error","statusText","json","getHnAPI","post","body","method","JSON","stringify","headers","apiFactory","http","news","all","page","create","newHN","hnApi","TableHeader","props","hnHTTP","hnAPI","HackerNews","serverNews","useServerData","data","useState","setNews","hits","rawData","setRawData","isLoading","steLoading","currentPage","match","params","id","Number","navNext","navPrevious","getPageDetails","map","item","length","response","push","objectID","points","axes","React","useMemo","primary","type","position","lineChart","style","width","height","className","i","hide","key","num_comments","onClick","updatedData","updateVote","src","assetName","process","imagePath","alt","_highlightResult","title","value","url","parameter","URL","origin","removeParam","author","class","newsDetails","hideRow","aria-label","exact","to","activeClassName","fetchData"],"mappings":"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","file":"static/js/hackernews.65286cf6.chunk.js","sourcesContent":["import fetch from 'isomorphic-unfetch';\r\n\r\nexport function httpClient(baseURL) {\r\n  return {\r\n    get: (path, options) => {\r\n      return fetch(baseURL + path, options).then(res => {\r\n        if (!res.ok) {\r\n          throw new Error(res.statusText);\r\n        }\r\n\r\n        return res.json();\r\n      });\r\n    },\r\n\r\n    getHnAPI: (path, options) => {\r\n      return fetch(path, options).then(res => {\r\n        if (!res.ok) {\r\n          throw new Error(res.statusText);\r\n        }\r\n\r\n        return res.json();\r\n      });\r\n    },\r\n\r\n    post: (path, body, options = {}) => {\r\n      return fetch(baseURL + path, {\r\n        ...options,\r\n        method: 'POST',\r\n        body: JSON.stringify(body),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...options.headers\r\n        }\r\n      }).then(res => {\r\n        if (!res.ok) {\r\n          throw new Error(res.statusText);\r\n        }\r\n\r\n        return res.json();\r\n      });\r\n    }\r\n  };\r\n}\r\n","import { httpClient } from './httpClient';\r\nimport { hnApi } from './hnApi';\r\n\r\nexport function apiFactory(http) {\r\n  return {\r\n    news: hnApi(http)\r\n  };\r\n}\r\n\r\nconst http = httpClient('http://localhost:3000');\r\nconst hnHTTP = httpClient('https://hn.algolia.com/api/v1/search_by_date');\r\nexport const api = apiFactory(http);\r\nexport const hnAPI = apiFactory(hnHTTP);\r\n","export function hnApi(http) {\r\n  return {\r\n    all: page => {\r\n      return http.get(`?tags=story&page=${page}`);\r\n    },\r\n\r\n    create: (newHN, page) => {\r\n      return http.post('/api/hn', newHN);\r\n    }\r\n  };\r\n}\r\n","import React from 'react';\r\n\r\nconst TableHeader = props => {\r\n  return (\r\n    <tr>\r\n      <th>Comments</th>\r\n      <th>Vote Count</th>\r\n      <th>Up Vote</th>\r\n      <th>News Details</th>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default TableHeader;\r\n","import React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Chart } from 'react-charts';\r\nimport { imagePath } from '../../utils/assetUtils';\r\nimport { hnAPI } from '../../api';\r\nimport { useServerData } from '../../state/serverDataContext';\r\nimport TableHeader from '../tableHeader/TableHeader';\r\n\r\nconst HackerNews = props => {\r\n  const serverNews = useServerData(data => {\r\n    return data.news || [];\r\n  });\r\n  const [news, setNews] = useState([serverNews]);\r\n  const [rawData, setRawData] = useState(serverNews.hits);\r\n  const [isLoading, steLoading] = useState(false);\r\n  let currentPage =\r\n    props.match.params && props.match.params.id\r\n      ? Number(props.match.params.id)\r\n      : 1;\r\n  let navNext = currentPage + 1;\r\n  let navPrevious = currentPage > 1 ? currentPage - 1 : 1;\r\n\r\n  function getPageDetails(currentPage) {\r\n    setRawData([]);\r\n    steLoading(true);\r\n    news.map(item => {\r\n      if (Number(item.page) === currentPage) {\r\n        setRawData(item.hits);\r\n        steLoading(false);\r\n      } else {\r\n        hnAPI.news.all(currentPage).then(data => {\r\n          if (data.hits.length > 0) {\r\n            setNews([...news, { ...data }]);\r\n            setRawData(data.hits);\r\n            steLoading(false);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  let response = [];\r\n  rawData &&\r\n    response.push(\r\n      rawData.map(item => {\r\n        return [item.objectID ? item.objectID : 'N/A', item.points];\r\n      })\r\n    );\r\n\r\n  const axes = React.useMemo(\r\n    () => [\r\n      { primary: true, type: 'ordinal', position: 'bottom' },\r\n      { type: 'linear', position: 'left' }\r\n    ],\r\n    []\r\n  );\r\n\r\n  const lineChart = (\r\n    <div\r\n      style={{\r\n        width: '100%',\r\n        height: '300px'\r\n      }}\r\n    >\r\n      <Chart data={response} axes={axes} />\r\n    </div>\r\n  );\r\n\r\n  const updateVote = objectID => {\r\n    let updatedData = [];\r\n    rawData.map(item => {\r\n      if (item.objectID === objectID) {\r\n        updatedData.push({\r\n          ...item,\r\n          points: item.points ? Number(item.points) + 1 : 1\r\n        });\r\n      } else {\r\n        updatedData.push(item);\r\n      }\r\n    });\r\n    setRawData(updatedData);\r\n  };\r\n\r\n  function removeParam(parameter) {\r\n    let url = new URL(parameter);\r\n    return url.origin;\r\n  }\r\n\r\n  function hideRow(objectID) {\r\n    let newsDetails = [];\r\n    rawData.map(item => {\r\n      if (item.objectID === objectID) {\r\n        newsDetails.push({\r\n          ...item,\r\n          hide: true\r\n        });\r\n      } else {\r\n        newsDetails.push(item);\r\n      }\r\n    });\r\n    setRawData(newsDetails);\r\n  }\r\n\r\n  return (\r\n    <div className=\"hacker-news\">\r\n      <h1 className=\"hn-title\">Hacker news page</h1>\r\n      <table>\r\n        <thead>\r\n          <TableHeader />\r\n        </thead>\r\n        <tbody>\r\n          {isLoading ? <h3 className=\"text-center\">Loading...</h3> : null}\r\n          {rawData &&\r\n            rawData.map((item, i) => {\r\n              if (!item.hide) {\r\n                return (\r\n                  <tr key={i}>\r\n                    <td className=\"text-center\">\r\n                      {item.num_comments ? item.num_comments : 0}\r\n                    </td>\r\n                    <td className=\"text-center\">\r\n                      {item.points ? item.points : 0}\r\n                    </td>\r\n                    <td\r\n                      onClick={() => {\r\n                        updateVote(item.objectID);\r\n                      }}\r\n                    >\r\n                      <img\r\n                        width=\"10px\"\r\n                        className=\"upvote\"\r\n                        src={imagePath('arrow-up.png')}\r\n                        alt=\"Up Vote\"\r\n                      />\r\n                    </td>\r\n                    <td>\r\n                      {item._highlightResult.title.value}\r\n                      <span className=\"url-link\">{`  ( ${item.url &&\r\n                        removeParam(item.url)} ) By ${item.author} `}</span>\r\n                      <span\r\n                        class=\"hide\"\r\n                        onClick={() => {\r\n                          hideRow(item.objectID);\r\n                        }}\r\n                      >\r\n                        [ hide ]\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              }\r\n            })}\r\n        </tbody>\r\n      </table>\r\n\r\n      <nav className=\"navigation\" aria-label=\"navigation\">\r\n        <NavLink\r\n          exact\r\n          to={`/HackerNews/${navPrevious}`}\r\n          onClick={() => {\r\n            getPageDetails(navPrevious);\r\n          }}\r\n          activeClassName=\"active\"\r\n        >\r\n          Previous\r\n        </NavLink>{' '}\r\n        <NavLink\r\n          exact\r\n          to={`/HackerNews/${navNext}`}\r\n          onClick={() => {\r\n            getPageDetails(navNext);\r\n          }}\r\n          activeClassName=\"active\"\r\n        >\r\n          Next\r\n        </NavLink>\r\n      </nav>\r\n\r\n      <div className=\"line-chart\">{lineChart}</div>\r\n    </div>\r\n  );\r\n};\r\nHackerNews.fetchData = () => {\r\n  return hnAPI.news.all(1).then(news => {\r\n    return {\r\n      news\r\n    };\r\n  });\r\n};\r\n\r\nexport default HackerNews;\r\n","// We can use \"process.env.VAR_NAME\" on both the server and the client.\r\n// See config/env.js and server/indexHtml.js\r\nexport function imagePath(assetName) {\r\n  return `${process.env.PUBLIC_URL}/images/${assetName}`;\r\n}\r\n"],"sourceRoot":""}